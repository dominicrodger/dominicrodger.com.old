<!DOCTYPE html>
<html lang="en">
<head>
        <title>dominicrodger.com - code</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href=".././theme/css/main.css" type="text/css" />
        <link href="http://dominicrodger.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="dominicrodger.com Atom Feed" />
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href=".././css/ie.css"/>
                <script src=".././js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href=".././css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

<a href="https://github.com/dominicrodger/dominicrodger.com">

<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />

</a>

        <header id="banner" class="body">
                <h1><a href="../.">dominicrodger.com </a></h1>
                <nav><ul>
                
                
                
                    <li><a href=".././pages/about-me.html">about me</a></li>
                
                
                
                    <li class="active"><a href=".././category/code.html">code</a></li>
                
                </ul></nav>
        </header><!-- /#banner -->
                

            

        
        
            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href=".././responsive-beginnings.html">Forays into Responsive Design</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2012-12-26T20:09:00">
                Wednesday 26 December 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info --><h1>The Project</h1>
<p>A good friend of mine alters cards for <em>Magic: The Gathering</em> for fun
and profit. Previously, he posted them on his
<a href="http://www.twitter.com/JamesTMS" title="James' Twitter Feed">Twitter feed</a>, along with a brief description, but
that doesn't provide a great way of seeing at a glance the sort of
things he does - a place to point people who ask for examples of his
work.</p>
<p>Initially, I suggested <a href="http://www.flickr.com" title="Flickr: A photo-sharing site">Flickr</a>, but it didn't do quite what
he wanted. Since I had a few hours to spare, I did what any
self-respecting engineer would do, and offered to build something. I
launched the resulting site today:
<a href="http://www.griffinalters.com" title="Take a look at griffinalters.com - my first responsive site">griffinalters.com</a><sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.</p>
<p>Since it was a fairly simple site, which basically has only one
interesting page, I thought now was as good a time as any to get
started down the <a href="http://www.alistapart.com/articles/responsive-web-design/" title="Read Ethan Marcotte's seminal essay on Responsive Web Design, 2010">responsive design</a> path.</p>
<h1>Bootstrap First</h1>
<p><em>NB. You'll probably understand the rest of this article better if you
 take a look at <a href="http://www.griffinalters.com" title="Take a look at griffinalters.com - my first responsive site">griffinalters.com</a> first.</em></p>
<p>I started off by using the grid that Bootstrap gives you, along with
the extra responsive CSS file (<code>bootstrap-responsive.css</code>). The card
on the left-hand side was a <code>span4</code>, and the card thumbnails on the
right-hand side were each <code>span2</code>s. This worked - sort of. On large
enough screens (basically screens at least 768px wide), I'd get the
"featured" card on the left-hand side, and the list of thumbnails on
the right-hand side. The problem with this was that it was all or
nothing - above 768px it'd look like the full desktop site, below
768px, it'd just be a single column - with a single thumbnail on each
row below the featured image.</p>
<h1>Hey, look! No span[0-9]!</h1>
<p>What I really wanted was the featured card on the left, and a set of
thumbnails on the right, which remained unless there was no space for
thumbnails at all, at which point the thumbnails would drop beneath
the featured card. So, I started from scratch - here is the source for
the list of thumbnails<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>:</p>
<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;float: left; margin-right: 20px&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;card1-thumbnail.jpg&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>This works more or less as intended<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> - the wider the viewport, the more
thumbnails there'll be on any given row.</p>
<p>To position the primary card, I floated it left, and wrapped the
thumbnails:</p>
<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;width: 400px; float: left&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;card1-primary.jpg&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin-left: 420px&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;thumbnail&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;card1-thumbnail.jpg&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;thumbnail&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;card2-thumbnail.jpg&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    ...
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>This works great for displays bigger than 420px, but the <code>margin-left</code>
means that if we can't fit any thumbnails to the right of the featured
card, then we end up having a blank space to the left of our
thumbnails.</p>
<p>To fix this, we scope the <code>margin-left</code> rule to "reasonably large"
displays. We give the wrapper around our thumbnails the class
"additional-cards", and then in our CSS file we write:</p>
<div class="codehilite"><pre><span class="k">@media</span> <span class="o">(</span><span class="nt">min-width</span><span class="o">:</span> <span class="nt">420px</span><span class="o">)</span> <span class="p">{</span>
    <span class="nc">.additional-cards</span> <span class="p">{</span>
        <span class="k">margin-left</span><span class="o">:</span> <span class="m">420px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>This means that we only apply the left margin to our list of
thumbnails if our viewport is at least 420px<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>.</p>
<p>This gets us a bit closer - but doesn't work very well for displays
only slightly wider than 420px - we still end up with the margin to
the left of our list of thumbnails, but if there's not space to the
right of our featured image for at least one thumbnail, we're back to
the earlier problem, where the containing element for the list of
thumbnails gets pushed below our featured image, and has a blank space
to the left. This is easily fixed by adjusting our <code>min-width</code> to
768px, or something similar:</p>
<div class="codehilite"><pre><span class="k">@media</span> <span class="o">(</span><span class="nt">min-width</span><span class="o">:</span> <span class="nt">768px</span><span class="o">)</span> <span class="p">{</span>
    <span class="nc">.additional-cards</span> <span class="p">{</span>
        <span class="k">margin-left</span><span class="o">:</span> <span class="m">420px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h1>min-height too!</h1>
<p>One slight irritation is that once you've got enough thumbnails, as
you scroll down, the featured image scrolls off the page, and the
thumbnails again have a large empty space to the left of them.</p>
<p>One way to fix this is with <code>position: fixed</code>, but this causes
problems for browsers which aren't tall enough to display the entire
featured image and its description - since they're not visible in the
browser's viewport at load time, and you can't scroll to see the rest
of it.</p>
<p>For this site, we know that all images are 350px high, so we probably
need a viewport about 600px high to see the image and its associated
description:</p>
<div class="codehilite"><pre><span class="k">@media</span> <span class="o">(</span><span class="nt">min-height</span><span class="o">:</span> <span class="nt">600px</span><span class="o">)</span> <span class="p">{</span>
    <span class="nc">.primary-card</span> <span class="p">{</span>
        <span class="k">position</span><span class="o">:</span> <span class="k">fixed</span><span class="p">;</span>
        <span class="k">float</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>And that's almost it: there's a tiny bit more to our responsive
layout, but not a great deal - you can take a look at
<a href="https://raw.github.com/dominicrodger/squigcards/master/squigcards/static/squigcards/css/base.css" title="View the CSS that lays out griffinalters.com">the CSS</a>. If you're interested - all the code that powers
the site is on <a href="https://github.com/dominicrodger/squigcards" title="View the source for griffinalters.com">GitHub</a>.</p>
<h1>Concluding Thoughts</h1>
<p>All this was complicated enough to get (hopefully largely) right on a
site that is effectively just a single page site - but hopefully the
things I've learned in the attempt will be useful as I work on more
complex sites too.</p>
<p>If you've spotted things I've done wrong - feel free to send me a pull
request, or ping me on <a href="http://www.twitter.com/dominicrodger" title="View my Twitter profile">Twitter</a>.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>You'll have to excuse the somewhat basic theming of
  <a href="http://twitter.github.com/bootstrap/" title="Twitter Bootstrap">Bootstrap</a> - it uses a fairly unchanged version of
  the <a href="http://bootswatch.com/cyborg/" title="The Cyborg theme for Bootstrap">Cyborg theme</a>.&#160;<a href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>In real life, I didn't use inline styles, hopefully you get the
  idea.&#160;<a href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>The "less" is for the fact that I can't find a neat way to
  remove the right margin on the last element in each row. This
  means that the last thumbnail in each row can't get any closer
  than 20px from the right hand side of the containing element. I
  know it's possible to figure this out in JavaScript, but I'm not
  sure it's worth the effort.&#160;<a href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Yes, I know this isn't a large enough <code>min-width</code> - we'll get
  there in a moment.&#160;<a href="#fnref:4" rev="footnote" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                </article>
                
            </aside><!-- /#featured -->
            
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
            
        
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././ubuntu-netbook.html" rel="bookmark" title="Permalink to Moving to Ubuntu for mobile development">Moving to Ubuntu for mobile development</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-07-09T17:46:00">
                Monday 09 July 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <h1>My mobile office</h1>
<p>My web-development office is a fast-moving place.</p>
<p>It averages around 50 miles per hour<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>, and I work on a laptop
normally squished between two people on the train to and from the
office.</p>
<p>When I happen to have a spare moment to build websites at home ...</p>
                <a class="readmore" href=".././ubuntu-netbook.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././order-n-haystack.html" rel="bookmark" title="Permalink to Avoiding database queries with Haystack">Avoiding database queries with Haystack</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-07-05T17:20:00">
                Thursday 05 July 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <h1>Order(n) is a pretty bad idea.</h1>
<p>Originally, my SearchIndexes for <a href="http://haystacksearch.org/" title="Haystack is a search solution for Django apps">Haystack</a> looked a bit
like this:</p>
<div class="codehilite"><pre><span class="k">class</span> <span class="nc">RegularEventIndex</span><span class="p">(</span><span class="n">indexes</span><span class="o">.</span><span class="n">SearchIndex</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">indexes</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">document</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_template</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<p>Then, when someone ran a search, and I wanted to display a result, I'd
load up a template (which template I ...</p>
                <a class="readmore" href=".././order-n-haystack.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././faster-django-tests.html" rel="bookmark" title="Permalink to Faster Django Tests">Faster Django Tests</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-06-10T07:11:00">
                Sunday 10 June 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <p>A <a href="http://www.dominicrodger.com/tdd-django-south.html" title="Read my original post on making test runs in Django faster">long while ago</a>, I discovered that running Django tests
is much faster if you use SQLite, and if you turn off South (this now
seems pretty obvious, but at the time was a bit of a revelation to
me).</p>
<p>Since then, I've come across a better way of ...</p>
                <a class="readmore" href=".././faster-django-tests.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././build-breaking.html" rel="bookmark" title="Permalink to Travis, You Are Awesome">Travis, You Are Awesome</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-04-29T12:27:00">
                Sunday 29 April 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <p>I came across <a href="http://travis-ci.org" title="Find out about Travis CI">Travis CI</a> this week, and it's awesome.</p>
<p>I've got a bunch of tests for <a href="https://github.com/dominicrodger/django-magazine" title="View django-magazine on GitHub">django-magazine</a>, but
I'm not very good at running them. It turns out that unit tests aren't
very useful if you don't run them, so I wanted to make ...</p>
                <a class="readmore" href=".././build-breaking.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././nothing.html" rel="bookmark" title="Permalink to I Know Nothing">I Know Nothing</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-04-20T22:52:00">
                Friday 20 April 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <blockquote>
<p>See, I know nothing! &mdash; <a href="http://www.imdb.com/character/ch0023128/quotes" title="Manuel, from Fawlty Towers">Manuel</a></p>
</blockquote>
<p>I distinctly remember being 17 years old, I'd just finished
re-launching a site for <a href="http://www.oxygen-online.org" title="Find out about Oxygen">a charity</a> I was involved with<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>,
and I confidently declared that I knew all there was to know about
building websites. And I believed it.</p>
<p>At the time, I ...</p>
                <a class="readmore" href=".././nothing.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././better-testing.html" rel="bookmark" title="Permalink to Getting Better at Testing">Getting Better at Testing</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-04-12T19:18:00">
                Thursday 12 April 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <p>I started with unit testing about 4 years ago. I started writing what were
probably integration tests, when I was working on the database backend of our
application. The tests I wrote were designed to make sure that our process
which saved data actually saved data. Saving data involved creating ...</p>
                <a class="readmore" href=".././better-testing.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././pelican.html" rel="bookmark" title="Permalink to Starting with Pelican">Starting with Pelican</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-04-07T09:39:00">
                Saturday 07 April 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <h1>A brief history of my (failed) blogs</h1>
<p>In about 1998, I was building a website for a friend. The site was entirely
static. I'd already learned the hard way about the pain of trying to keep lots
of separate static HTML files visually consistent.</p>
<p>To build the site, I ...</p>
                <a class="readmore" href=".././pelican.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././starting-over.html" rel="bookmark" title="Permalink to Starting Over">Starting Over</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-04-07T07:58:00">
                Saturday 07 April 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <h1>Please sir, can I start again?</h1>
<p>Every once in a while, I want to start again.</p>
<p>I currently have 6 different sites using Kal&#233;o<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>. The code is stored in
a private git repository, and synced out to 6 different places every time I
need to make a change ...</p>
                <a class="readmore" href=".././starting-over.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
        
            

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././tdd-django-south.html" rel="bookmark" title="Permalink to Test-Driven Development with Django & South">Test-Driven Development with Django & South</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2011-01-11T00:00:00">
                Tuesday 11 January 2011
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/dominic-rodger.html">Dominic Rodger</a>
        </address>
        
<p>In <a href=".././category/code.html">code</a>. </p>



</footer><!-- /.post-info -->
                <p>I'd basically given up on attempting test-driven with Django, given
the project I'm currently working on uses models with a lot of
<a href="http://south.aeracode.org" title="Find out about South, a tool for managing database migrations in Django.">South</a> migrations. Just building the database and running the
migrations could take a minute or so when running <code>manage.py test</code>,
and resetting the database to ...</p>
                <a class="readmore" href=".././tdd-django-south.html">read more</a>
                
                </div><!-- /.entry-content -->
            </article></li>
        
        
            
        
        
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        
    


        <section id="extras" class="body">
        
        
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://dominicrodger.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            

                        
                            <li><a href="http://twitter.com/dominicrodger">Twitter</a></li>
                        
                            <li><a href="http://github.com/dominicrodger">GitHub</a></li>
                        
                            <li><a href="http://stackoverflow.com/users/20972/dominic-rodger">Stack Overflow</a></li>
                        
                        </ul>
                </div><!-- /.social -->
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                Site hosted by <a href="http://www.webfaction.com?affiliate=dominicrodger" title="Get hosted by WebFaction">WebFaction</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-11204085-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>



</body>
</html>